<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="assets/fonts/caslon-web/stylesheet.css"/>
	<link rel="stylesheet" type="text/css" href="assets/fonts/brandon-text-web/stylesheet.css"/>
	<link rel="stylesheet" type="text/css" href="assets/fonts/itc-grouch-web/stylesheet.css"/>
	<link rel="stylesheet" type="text/css" href="css/style.css"/>
	<title>LiNK (dev page)</title>
</head>
<body>
	<div id="title" class="screen">
		<div class="main">
			<h1 class="glow">Home</h1>
			<h2>a charity project for Liberty in North Korea.</h2>
			<p class="blinkAnim">CLICK AND HOLD</p>
		</div>
	</div>
	<div id="quoteInput" class="screen">
		<div class="main">
			<h1 class="glow">What is home?</h1>
			<form id="prompt">
				<textarea maxlength="250" rows="3" spellcheck="false" id="userAnswer" class="textinput" type="text" id="answer" autofocus autocomplete="nope"></textarea>
			</form>
			<div class="remaining"><span id="userAnswerRemaining">250</span> characters remaining</div>
			<div class="submitButton glowBorder"></div>
		</div>
	</div>
	<div id="quoteMain" class="screen">
		<div class="main">
			<h1 id="quoteMainAnswer">"Home is where I can eat a peanut banana sandwich."</h1>
			<p id="quoteMainUser">Bryan Wong, Los Angeles</p>
			<div id="quoteMainClose" class="submitButton glowBorder"></div>
		</div>
	</div>
	<div id="donation" class="screen">
		<div class="wrapper">
			<div class="main">
				<div id="donationClose" class="submitButton glowBorder"></div>
				<div class="info">
					<h1 class="glow">Help others find a home</h1>
					<p>We all have a home. Some don't. Every year, Liberty in North Korea helps refugees escape an oppressive country and find a home somewhere else... donate the support the cause.</p>
					<a href="https://www.libertyinnorthkorea.org/" target="_blank">learn more</a>
				</div>
				<form id="donationForm" spellcheck="false">
					<div class="form-group name">
						<label for="name">name</label>
						<input type="text" class="form-control" id="name" autocomplete="nope"></input>
					</div>
					<div class="form-group cvv">
						<label for="cvv">cvv</label>
						<input maxlength="4" type="text" class="form-control" id="cvv" autocomplete="nope"></input>
					</div>
					<div class="form-group number">
						<label for="number">card number</label>
						<input type="text" class="form-control" id="number" autocomplete="nope"></input>
					</div>
					<div class="form-group expiration">
						<label for="expiration">expiration</label>
						<input maxlength="5" type="text" class="form-control" id="expiration" autocomplete="nope"></input>
						<h1 class="description">mm/yy</h1>
					</div>
					<div id="submit">
						<button type="submit">submit</button>
					</div>
				</form>
			</div>
		</div>
	</div>
	<div id="container"></div>
</body>
<script type="vsh" id="vertexShader">
	
	varying vec3 vNormal;
	void main() 
	{
	    vNormal = normalize( normalMatrix * normal );
	    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
	}

</script>
<script type="fsh" id="fragmentShader">

	uniform float c;
	uniform float p;
	varying vec3 vNormal;

	void main() 
	{
		float intensity = pow( c - dot( vNormal, vec3( 0.0, 0.0, 1.0 ) ), p ); 
		gl_FragColor = vec4( 1.0, 1.0, 1.0, 1.0 ) * intensity;
	}

</script>

<script type="vsh" id="globeVertex">

	uniform vec3 avatarPos;
	uniform float appearAmt; //0->1 how many meshes appear around avatar
	uniform float maxDist;

	attribute vec3 vOffset;

	varying vec3 testColor;
	varying float opacity;

	float rand(float n){return fract(sin(n) * 43758.5453123);}

	void main() 
	{
	    vec4 mPosition = modelMatrix * vec4(vOffset, 1.);
	    float scale = rand(vOffset.x);
	    mPosition.xyz += position * 3.*scale;

	    float dist = distance(mPosition.xyz, avatarPos);
	    opacity = (maxDist - distance(mPosition.xyz, avatarPos)) / maxDist;
	    opacity = clamp(opacity, 0., 1.);

	    float appear = step( 1.-appearAmt, rand(scale) );
	    opacity *= appear;

	    testColor = (viewMatrix * mPosition).xyz;

	    gl_Position = projectionMatrix * viewMatrix * mPosition;
	}

</script>
<script type="fsh" id="globeFragment">

	uniform vec3 avatarPos;

	varying vec3 testColor;
	varying float opacity;

	void main() 
	{
		// float intensity = pow( c - dot( vNormal, vec3( 0.0, 0.0, 1.0 ) ), p ); 
		// gl_FragColor = vec4( 1.0, 1.0, 1.0, 1.0 ) * intensity;
		gl_FragColor = vec4( vec3(1.), opacity);
		// gl_FragColor = vec4( normalize(testColor), opacity );
	}

</script>

<script src="node_modules/d3-geo/build/d3-geo.min.js"></script>
<script src="node_modules/three/build/three.js"></script>
<script src="node_modules/three/examples/js/controls/OrbitControls.js"></script>
<script src="node_modules/three/examples/js/modifiers/SubdivisionModifier.js"></script>
<script src="node_modules/three/examples/js/utils/GeometryUtils.js"></script>
<script src="node_modules/tween.js/src/Tween.js"></script>
<script src="src/js/util.js"></script>
<script src="src/js/data.js"></script>
<script src="src/js/Loader.js"></script>
<script src="src/js/Globe.js"></script>
<script src="src/js/glowMesh.js"></script>
<script src="src/js/Avatar.js"></script>
<script src="src/js/Submit.js"></script>
<script src="src/js/WorldController.js"></script>
<script src="src/js/ui.js"></script>
<script src="src/js/main.js"></script>
</html>